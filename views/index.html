<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="HandheldFriendly" content="true">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" type="text/css" href="lib/normalize.css">
  <link rel="stylesheet" type="text/css" href="index.css">
  <title>Ares Template Project</title>
</head>
<body>
  <script src="lib/scrat.js"></script>
  <script>
    require.config(__FRAMEWORK_CONFIG__);
    require.async('boot', function (boot) {

      var parseQueryString = function( url ){
        var reg_url =/^[^\?]+\?([\w\W]+)$/,
                reg_para=/([^&=]+)=([\w\W]*?)(&|$)/g, //g is very important
                arr_url = reg_url.exec( url ),
                ret        = {};
        if( arr_url && arr_url[1] ){
          var str_para = arr_url[1],result;
          while((result = reg_para.exec(str_para)) != null){
            ret[result[1]] = result[2];
          }
        }
        return ret;
      }
      //将参数转化为模块对象
      var data = parseQueryString(window.location.href);


      if(!require.config().debug){
        //运行模式，监听jsbridge事件
        if (window.WebViewJavascriptBridge) {
          boot(data);
        } else {
          document.addEventListener('WebViewJavascriptBridgeReady', function () {
            boot(data);
          }, false);
        }

      }else{
        boot(data)
      }

    });
  </script>
</body>
</html>